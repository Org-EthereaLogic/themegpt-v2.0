<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ThemeGPT - Animated Pattern Prototype</title>
  <style>
    /* === CSS Variables === */
    :root {
      --cgpt-bg: #0A0A1A;
      --cgpt-surface: #12122A;
      --cgpt-text: #FAFAFA;
      --cgpt-text-muted: #B8B8D1;
      --cgpt-border: #2A2A4A;
      --cgpt-accent: #FFD700;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--cgpt-bg);
      color: var(--cgpt-text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* =========================================
       LAYER 1: Animated Geometric Patterns
       ========================================= */

    /* Floating particles layer */
    .pattern-particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      background: var(--cgpt-accent);
      opacity: 0;
      animation: float-particle 20s infinite ease-in-out;
    }

    @keyframes float-particle {
      0%, 100% {
        transform: translateY(100vh) scale(0);
        opacity: 0;
      }
      10% { opacity: 0.15; }
      90% { opacity: 0.15; }
      95% {
        transform: translateY(-10vh) scale(1);
        opacity: 0;
      }
    }

    /* Generate multiple particles with staggered delays */
    .particle:nth-child(1) { left: 5%; width: 4px; height: 4px; animation-delay: 0s; animation-duration: 25s; }
    .particle:nth-child(2) { left: 15%; width: 6px; height: 6px; animation-delay: 2s; animation-duration: 20s; }
    .particle:nth-child(3) { left: 25%; width: 3px; height: 3px; animation-delay: 4s; animation-duration: 28s; }
    .particle:nth-child(4) { left: 35%; width: 5px; height: 5px; animation-delay: 1s; animation-duration: 22s; }
    .particle:nth-child(5) { left: 45%; width: 4px; height: 4px; animation-delay: 6s; animation-duration: 26s; }
    .particle:nth-child(6) { left: 55%; width: 7px; height: 7px; animation-delay: 3s; animation-duration: 24s; }
    .particle:nth-child(7) { left: 65%; width: 3px; height: 3px; animation-delay: 5s; animation-duration: 21s; }
    .particle:nth-child(8) { left: 75%; width: 5px; height: 5px; animation-delay: 7s; animation-duration: 27s; }
    .particle:nth-child(9) { left: 85%; width: 4px; height: 4px; animation-delay: 2.5s; animation-duration: 23s; }
    .particle:nth-child(10) { left: 95%; width: 6px; height: 6px; animation-delay: 4.5s; animation-duration: 19s; }

    /* =========================================
       LAYER 2: Drifting Geometric Shapes
       ========================================= */

    .pattern-shapes {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .shape {
      position: absolute;
      opacity: 0.04;
      animation: drift 60s infinite linear;
    }

    .shape.diamond {
      width: 40px;
      height: 40px;
      background: var(--cgpt-accent);
      transform: rotate(45deg);
    }

    .shape.circle {
      width: 60px;
      height: 60px;
      border: 2px solid var(--cgpt-accent);
      border-radius: 50%;
      background: transparent;
    }

    .shape.triangle {
      width: 0;
      height: 0;
      border-left: 25px solid transparent;
      border-right: 25px solid transparent;
      border-bottom: 43px solid var(--cgpt-accent);
    }

    .shape.cross {
      width: 30px;
      height: 30px;
      background:
        linear-gradient(var(--cgpt-accent), var(--cgpt-accent)) center/100% 4px no-repeat,
        linear-gradient(var(--cgpt-accent), var(--cgpt-accent)) center/4px 100% no-repeat;
    }

    @keyframes drift {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(100px, 50px) rotate(90deg); }
      50% { transform: translate(50px, 100px) rotate(180deg); }
      75% { transform: translate(-50px, 50px) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }

    .shape:nth-child(1) { top: 10%; left: 10%; animation-duration: 80s; }
    .shape:nth-child(2) { top: 20%; left: 70%; animation-duration: 65s; animation-delay: -20s; }
    .shape:nth-child(3) { top: 50%; left: 30%; animation-duration: 75s; animation-delay: -40s; }
    .shape:nth-child(4) { top: 70%; left: 80%; animation-duration: 90s; animation-delay: -10s; }
    .shape:nth-child(5) { top: 80%; left: 15%; animation-duration: 70s; animation-delay: -30s; }
    .shape:nth-child(6) { top: 30%; left: 50%; animation-duration: 85s; animation-delay: -50s; }

    /* =========================================
       LAYER 3: Animated Grid Pattern
       ========================================= */

    .pattern-grid {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      background-image:
        linear-gradient(var(--cgpt-border) 1px, transparent 1px),
        linear-gradient(90deg, var(--cgpt-border) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.15;
      animation: grid-pulse 8s infinite ease-in-out;
    }

    @keyframes grid-pulse {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.18; }
    }

    /* =========================================
       LAYER 4: Radial Glow Animation
       ========================================= */

    .pattern-glow {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 3;
      background:
        radial-gradient(ellipse 80% 50% at 50% 0%, var(--cgpt-accent) 0%, transparent 50%),
        radial-gradient(ellipse 60% 40% at 80% 100%, var(--cgpt-accent) 0%, transparent 40%);
      opacity: 0.06;
      animation: glow-shift 12s infinite ease-in-out alternate;
    }

    @keyframes glow-shift {
      0% {
        background:
          radial-gradient(ellipse 80% 50% at 30% 0%, var(--cgpt-accent) 0%, transparent 50%),
          radial-gradient(ellipse 60% 40% at 80% 100%, var(--cgpt-accent) 0%, transparent 40%);
      }
      100% {
        background:
          radial-gradient(ellipse 80% 50% at 70% 0%, var(--cgpt-accent) 0%, transparent 50%),
          radial-gradient(ellipse 60% 40% at 20% 100%, var(--cgpt-accent) 0%, transparent 40%);
      }
    }

    /* =========================================
       LAYER 5: Pixel Art Integration Demo
       ========================================= */

    .pixel-art-demo {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      image-rendering: pixelated;
      opacity: 0.3;
      animation: pixel-float 4s infinite ease-in-out;
    }

    @keyframes pixel-float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* 16x16 pixel art star (CSS-only demo) */
    .pixel-star {
      width: 64px;
      height: 64px;
      background:
        /* Row 1 */
        linear-gradient(90deg, transparent 28px, var(--cgpt-accent) 28px 36px, transparent 36px),
        /* Row 2-3 */
        linear-gradient(90deg, transparent 24px, var(--cgpt-accent) 24px 40px, transparent 40px) 0 4px,
        linear-gradient(90deg, transparent 20px, var(--cgpt-accent) 20px 44px, transparent 44px) 0 8px,
        /* Center rows */
        linear-gradient(90deg, var(--cgpt-accent) 0 64px) 0 12px,
        linear-gradient(90deg, var(--cgpt-accent) 0 64px) 0 16px,
        linear-gradient(90deg, var(--cgpt-accent) 0 64px) 0 20px,
        /* Bottom rows */
        linear-gradient(90deg, transparent 20px, var(--cgpt-accent) 20px 44px, transparent 44px) 0 24px,
        linear-gradient(90deg, transparent 24px, var(--cgpt-accent) 24px 40px, transparent 40px) 0 28px,
        linear-gradient(90deg, transparent 28px, var(--cgpt-accent) 28px 36px, transparent 36px) 0 32px;
      background-repeat: no-repeat;
      background-size: 64px 4px;
    }

    /* =========================================
       Content Layer
       ========================================= */

    .content {
      position: relative;
      z-index: 10;
      max-width: 800px;
      margin: 0 auto;
      padding: 60px 24px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 16px;
      color: var(--cgpt-accent);
    }

    h2 {
      font-size: 1.5rem;
      margin: 32px 0 16px;
      color: var(--cgpt-text);
    }

    p {
      color: var(--cgpt-text-muted);
      line-height: 1.7;
      margin-bottom: 16px;
    }

    .demo-card {
      background: var(--cgpt-surface);
      border: 1px solid var(--cgpt-border);
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
    }

    .layer-toggle {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 24px 0;
    }

    .toggle-btn {
      padding: 10px 16px;
      background: var(--cgpt-surface);
      border: 1px solid var(--cgpt-border);
      border-radius: 8px;
      color: var(--cgpt-text);
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
    }

    .toggle-btn.active {
      background: var(--cgpt-accent);
      color: var(--cgpt-bg);
      border-color: var(--cgpt-accent);
    }

    .toggle-btn:hover:not(.active) {
      border-color: var(--cgpt-accent);
    }

    .perf-stats {
      font-family: monospace;
      font-size: 12px;
      padding: 12px;
      background: #000;
      border-radius: 6px;
      color: #4ade80;
    }

    /* =========================================
       Theme Presets
       ========================================= */

    .preset-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin: 24px 0;
    }

    .preset-btn {
      padding: 16px;
      border-radius: 8px;
      border: 2px solid transparent;
      cursor: pointer;
      text-align: left;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }

    .preset-btn:hover { transform: scale(1.02); }
    .preset-btn.active { border-color: #7ECEC5; }
  </style>
</head>
<body>
  <!-- ANIMATED PATTERN LAYERS -->
  <div class="pattern-particles" id="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <div class="pattern-shapes" id="shapes">
    <div class="shape diamond"></div>
    <div class="shape circle"></div>
    <div class="shape triangle"></div>
    <div class="shape cross"></div>
    <div class="shape diamond"></div>
    <div class="shape circle"></div>
  </div>

  <div class="pattern-grid" id="grid"></div>
  <div class="pattern-glow" id="glow"></div>

  <!-- PIXEL ART DEMO -->
  <div class="pixel-art-demo" id="pixelArt">
    <div class="pixel-star"></div>
  </div>

  <!-- CONTENT -->
  <main class="content">
    <h1>Animated Pattern Prototype</h1>
    <p>This prototype demonstrates CSS-based animated visual elements for ThemeGPT themes. All animations use GPU-accelerated transforms and opacity for optimal performance.</p>

    <h2>Layer Controls</h2>
    <div class="layer-toggle">
      <button class="toggle-btn active" data-layer="particles">Floating Particles</button>
      <button class="toggle-btn active" data-layer="shapes">Geometric Shapes</button>
      <button class="toggle-btn active" data-layer="grid">Animated Grid</button>
      <button class="toggle-btn active" data-layer="glow">Radial Glow</button>
      <button class="toggle-btn active" data-layer="pixelArt">Pixel Art</button>
    </div>

    <div class="demo-card">
      <h2>Performance Metrics</h2>
      <div class="perf-stats" id="perfStats">
        Calculating...
      </div>
    </div>

    <h2>Theme Presets</h2>
    <div class="preset-grid" id="presetGrid"></div>

    <div class="demo-card">
      <h2>Animation Variables</h2>
      <p>Control animation parameters via CSS variables or the indexing system:</p>
      <ul style="color: var(--cgpt-text-muted); margin-left: 20px; line-height: 2;">
        <li><code style="color: var(--cgpt-accent);">FX-ANIM-PARTICLES</code> - Floating particle count (1-20)</li>
        <li><code style="color: var(--cgpt-accent);">FX-ANIM-SHAPES</code> - Geometric shape count (1-10)</li>
        <li><code style="color: var(--cgpt-accent);">FX-ANIM-GRID</code> - Grid pulse enabled (true/false)</li>
        <li><code style="color: var(--cgpt-accent);">FX-ANIM-GLOW</code> - Glow shift enabled (true/false)</li>
        <li><code style="color: var(--cgpt-accent);">FX-ANIM-SPEED</code> - Global animation speed multiplier</li>
      </ul>
    </div>

    <div class="demo-card">
      <h2>Technical Notes</h2>
      <ul style="color: var(--cgpt-text-muted); margin-left: 20px; line-height: 2;">
        <li>All animations use <code style="color: var(--cgpt-accent);">transform</code> and <code style="color: var(--cgpt-accent);">opacity</code> only (GPU-accelerated)</li>
        <li>Layers use <code style="color: var(--cgpt-accent);">pointer-events: none</code> to not interfere with UI</li>
        <li>Low opacity values (0.04-0.15) ensure readability</li>
        <li>Staggered animation delays prevent visual monotony</li>
        <li>CSS-only pixel art uses gradient backgrounds (no external images)</li>
      </ul>
    </div>
  </main>

  <script>
    // Theme presets with animation configurations
    const ANIMATED_PRESETS = [
      {
        id: 'starry-night',
        name: 'Starry Night',
        colors: { bg: '#0A0A1A', surface: '#12122A', text: '#FAFAFA', muted: '#B8B8D1', border: '#2A2A4A', accent: '#FFD700' },
        layers: { particles: true, shapes: true, grid: false, glow: true, pixelArt: true }
      },
      {
        id: 'cyber-grid',
        name: 'Cyber Grid',
        colors: { bg: '#0D0221', surface: '#150634', text: '#F5E6FF', muted: '#D4AAFF', border: '#3D1A6D', accent: '#FF2E97' },
        layers: { particles: false, shapes: false, grid: true, glow: true, pixelArt: false }
      },
      {
        id: 'forest-mist',
        name: 'Forest Mist',
        colors: { bg: '#101917', surface: '#131F1D', text: '#E5F5F0', muted: '#94A3B8', border: '#1F2933', accent: '#22C55E' },
        layers: { particles: true, shapes: false, grid: false, glow: true, pixelArt: false }
      },
      {
        id: 'aurora-waves',
        name: 'Aurora Waves',
        colors: { bg: '#0A1628', surface: '#0F2137', text: '#E0F7FA', muted: '#80DEEA', border: '#164E63', accent: '#00E5CC' },
        layers: { particles: true, shapes: true, grid: false, glow: true, pixelArt: false }
      },
      {
        id: 'minimal-pulse',
        name: 'Minimal Pulse',
        colors: { bg: '#1E1E1E', surface: '#252526', text: '#D4D4D4', muted: '#808080', border: '#3C3C3C', accent: '#569CD6' },
        layers: { particles: false, shapes: false, grid: true, glow: false, pixelArt: false }
      },
      {
        id: 'neon-dreams',
        name: 'Neon Dreams',
        colors: { bg: '#262335', surface: '#2E2943', text: '#F9FAFB', muted: '#C7D2FE', border: '#433162', accent: '#FF6AC1' },
        layers: { particles: true, shapes: true, grid: false, glow: true, pixelArt: true }
      }
    ];

    // Layer visibility
    const layers = {
      particles: document.getElementById('particles'),
      shapes: document.getElementById('shapes'),
      grid: document.getElementById('grid'),
      glow: document.getElementById('glow'),
      pixelArt: document.getElementById('pixelArt')
    };

    // Toggle buttons
    document.querySelectorAll('.toggle-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const layer = btn.dataset.layer;
        btn.classList.toggle('active');
        layers[layer].style.display = btn.classList.contains('active') ? 'block' : 'none';
        console.log(`[ThemeGPT] Layer ${layer}: ${btn.classList.contains('active') ? 'ON' : 'OFF'}`);
      });
    });

    // Apply preset
    function applyPreset(preset) {
      const root = document.documentElement;
      root.style.setProperty('--cgpt-bg', preset.colors.bg);
      root.style.setProperty('--cgpt-surface', preset.colors.surface);
      root.style.setProperty('--cgpt-text', preset.colors.text);
      root.style.setProperty('--cgpt-text-muted', preset.colors.muted);
      root.style.setProperty('--cgpt-border', preset.colors.border);
      root.style.setProperty('--cgpt-accent', preset.colors.accent);

      // Update layers
      Object.keys(preset.layers).forEach(layer => {
        layers[layer].style.display = preset.layers[layer] ? 'block' : 'none';
        const btn = document.querySelector(`[data-layer="${layer}"]`);
        if (btn) btn.classList.toggle('active', preset.layers[layer]);
      });

      // Update active preset button
      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.preset === preset.id);
      });

      console.log(`[ThemeGPT] Applied preset: ${preset.id}`, preset);
    }

    // Build preset grid
    const presetGrid = document.getElementById('presetGrid');
    ANIMATED_PRESETS.forEach((preset, i) => {
      const btn = document.createElement('button');
      btn.className = 'preset-btn' + (i === 0 ? ' active' : '');
      btn.dataset.preset = preset.id;
      btn.style.background = preset.colors.bg;
      btn.style.color = preset.colors.text;
      btn.innerHTML = `
        <div style="margin-bottom:8px">${preset.name}</div>
        <div style="height:3px;background:${preset.colors.accent};border-radius:2px"></div>
      `;
      btn.addEventListener('click', () => applyPreset(preset));
      presetGrid.appendChild(btn);
    });

    // Performance monitoring
    let frameCount = 0;
    let lastTime = performance.now();
    function measurePerformance() {
      frameCount++;
      const now = performance.now();
      if (now - lastTime >= 1000) {
        const fps = Math.round(frameCount * 1000 / (now - lastTime));
        const memory = performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) : 'N/A';
        document.getElementById('perfStats').innerHTML = `
FPS: ${fps} | Memory: ${memory} MB
Active Layers: ${Object.keys(layers).filter(k => layers[k].style.display !== 'none').length}/5
Animation Elements: ${document.querySelectorAll('.particle, .shape').length}
        `.trim();
        frameCount = 0;
        lastTime = now;
      }
      requestAnimationFrame(measurePerformance);
    }
    requestAnimationFrame(measurePerformance);

    // Expose for console
    window.ANIMATED_PRESETS = ANIMATED_PRESETS;
    window.applyPreset = applyPreset;
    window.layers = layers;
  </script>
</body>
</html>
